version: 2.1
jobs:
  build:
    docker:
      - image: circleci/node:8.16.0
    steps:
      - checkout
      - run:
          name: Check Node.js version
          command: node -v
      - run:
          name: Install dependencies if needed
          command: npm install
      - run:
          name: Clean
          command: npm run clean
      - run:
          name: Build
          command: npm run build
      
      - add_ssh_keys:
          fingerprints:
            - $CIRCLE_SHA1
      - run:
          name: Deploy to github.io
          command: |
            cd ./public
            git config --global user.email "ms314006@hotmail.com"
            git config --global user.name "ms314006"
            git add .
            git commit -m "Deploy from CircleCI"
            git push origin HEAD:master